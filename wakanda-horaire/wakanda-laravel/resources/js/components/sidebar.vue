
<!-- Ce fichier gère l'affichage de la bar de navigation sur le coté du site (le menu de navigation) -->

<script setup >
import { ref } from "vue";
import { page } from "../state.js";
import { user } from "../state.js";
import logo from "./logo.vue";

window.addEventListener("hashchange", () => {
  page.value = window.location.hash;
});

let display = ref(false);

const props = defineProps({
  routes: {
    type: Object,
    required: true,
  },
  curHash: {
    type: String,
    required: true,
  },
});

async function logout() {
  await axios.get("/sanctum/csrf-cookie");
  const userdata = await axios.get("/logout");
  window.location = "/";
}
</script>

<template>
  <div class="sidenav">
    <nav>
      <ul>
        <li class="menu-items" v-for="(route, hash) of routes">
          <div class="oneLink">
            <a :id="route.id" :href="hash" :class="{ active: hash == curHash }">
              <div>
                <svg
                  :class="{ active: hash == curHash }"
                  v-if="route.id === 'horaires'"
                  width="22"
                  height="24"
                  viewBox="0 0 22 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M19.6154 2.28139H18.5805V2.03601C18.5805 0.907533 17.69 0 16.5828 0C15.4757 0 14.5852 0.907576 14.5852 2.03601V2.28139H13.0208V2.03601C13.0208 0.907533 12.1303 0 11.0231 0C9.91589 0 9.02544 0.907576 9.02544 2.03601V2.28139H7.46108V2.03601C7.46108 0.907533 6.57059 0 5.4634 0C4.35621 0 3.46572 0.907576 3.46572 2.03601V2.28139H2.43087C1.08308 2.28139 0 3.3852 0 4.7589V20.8262C0 22.1999 1.08304 23.3037 2.43087 23.3037H19.5676C20.9154 23.3037 21.9985 22.1999 21.9985 20.8262V4.78343C22.0466 3.40978 20.9632 2.28139 19.6154 2.28139ZM15.8607 2.06065C15.8607 1.64366 16.1977 1.3247 16.5828 1.3247C16.968 1.3247 17.3049 1.66812 17.3049 2.06065V3.82683C17.3049 4.24382 16.968 4.56278 16.5828 4.56278C16.1977 4.56278 15.8607 4.21937 15.8607 3.82683V2.06065ZM10.325 2.06065C10.325 1.64366 10.662 1.3247 11.0471 1.3247C11.4562 1.3247 11.7692 1.66812 11.7692 2.06065V3.82683C11.7692 4.24382 11.4323 4.56278 11.0471 4.56278C10.638 4.56278 10.325 4.21937 10.325 3.82683V2.06065ZM4.7652 2.06065C4.7652 1.64366 5.10215 1.3247 5.4873 1.3247C5.89644 1.3247 6.2094 1.66812 6.2094 2.06065V3.82683C6.2094 4.24382 5.87245 4.56278 5.4873 4.56278C5.07816 4.56278 4.7652 4.21937 4.7652 3.82683V2.06065ZM20.7948 20.8508C20.7948 21.5132 20.2653 22.0529 19.6154 22.0529L2.47866 22.0527C1.82877 22.0527 1.29926 21.513 1.29926 20.8507V7.87416H20.7706V20.8507L20.7948 20.8508Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M11.0471 20.0657C13.7909 20.0657 16.0293 17.7845 16.0293 14.9879C16.0293 12.1916 13.7908 9.91016 11.0471 9.91016C8.30339 9.91016 6.06494 12.1914 6.06494 14.9879C6.06494 17.7844 8.30339 20.0657 11.0471 20.0657ZM11.0471 11.2103C13.093 11.2103 14.7536 12.9029 14.7536 14.9878C14.7536 17.073 13.093 18.7656 11.0471 18.7656C9.00125 18.7656 7.34065 17.073 7.34065 14.988C7.34065 12.9028 9.00125 11.2103 11.0471 11.2103Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M12.2023 16.4607C12.2985 16.5343 12.4189 16.5588 12.5392 16.5588C12.7558 16.5588 12.9724 16.4361 13.0928 16.2398C13.2613 15.9455 13.1649 15.5285 12.8762 15.3567L11.6968 14.6208V13.0508C11.6968 12.7074 11.408 12.4131 11.071 12.4131C10.7341 12.4131 10.4453 12.7074 10.4453 13.0508V14.9886C10.4453 15.2094 10.5657 15.4301 10.7583 15.5283L12.2023 16.4607Z"
                    fill="#F6F6F6"
                  />
                </svg>
                <svg
                  :class="{ active: hash == curHash }"
                  v-if="route.id === 'notifications'"
                  width="19"
                  height="25"
                  viewBox="0 0 19 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M0 21.25V19.375H2.49375V9.8125C2.49375 8.0625 2.98359 6.50521 3.96328 5.14062C4.94297 3.77604 6.23438 2.91667 7.8375 2.5625V1.65625C7.8375 1.17708 8.00078 0.78125 8.32734 0.46875C8.65391 0.15625 9.04479 0 9.5 0C9.95521 0 10.3461 0.15625 10.6727 0.46875C10.9992 0.78125 11.1625 1.17708 11.1625 1.65625V2.5625C12.7656 2.91667 14.062 3.77604 15.0516 5.14062C16.0411 6.50521 16.5359 8.0625 16.5359 9.8125V19.375H19V21.25H0ZM9.5 25C8.86667 25 8.3125 24.7552 7.8375 24.2656C7.3625 23.776 7.125 23.1875 7.125 22.5H11.875C11.875 23.1875 11.6424 23.776 11.1773 24.2656C10.7122 24.7552 10.1531 25 9.5 25ZM4.275 19.375H14.7547V9.8125C14.7547 8.27083 14.25 6.95833 13.2406 5.875C12.2312 4.79167 10.9943 4.25 9.52969 4.25C8.0651 4.25 6.82318 4.79167 5.80391 5.875C4.78464 6.95833 4.275 8.27083 4.275 9.8125V19.375Z"
                    fill="#F6F6F6"
                  />
                </svg>
                <svg
                  :class="{ active: hash == curHash }"
                  v-if="route.id === 'notes'"
                  width="24"
                  height="22"
                  viewBox="0 0 24 22"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M23.1367 5.75974L11.9709 0.0599042C11.8158 -0.019968 11.6337 -0.019968 11.478 0.0599042L0.312172 5.75974C0.121315 5.85706 0 6.05848 0 6.27911C0 6.49973 0.120569 6.70114 0.312172 6.79847L2.78939 8.06301V17.5301C2.78939 17.6721 2.83968 17.8087 2.93015 17.9146C5.15388 20.5107 8.34868 22 11.6942 22C15.0808 22 18.2995 20.4819 20.5233 17.8353C20.6121 17.7298 20.6607 17.5951 20.6607 17.4549L20.6603 8.06221L23.1369 6.79822C23.3278 6.7009 23.4491 6.49948 23.4491 6.27886C23.4489 6.05844 23.3278 5.85682 23.1369 5.7595L23.1367 5.75974ZM19.5436 17.2349C17.5376 19.53 14.6892 20.8421 11.6936 20.8421C8.7369 20.8421 5.90991 19.5562 3.9053 17.3066V8.63502L11.4754 12.4969C11.4759 12.4969 11.4765 12.4969 11.477 12.4975H11.4776C11.5552 12.5374 11.6395 12.5572 11.7238 12.5572C11.8081 12.5572 11.8924 12.5374 11.97 12.4975L15.8647 10.5098L16.4978 10.1867V12.9271C15.537 13.183 14.8229 14.0718 14.8229 15.1348C14.8229 15.4545 15.073 15.7138 15.3813 15.7138C15.6895 15.7138 15.9396 15.4545 15.9396 15.1348C15.9396 14.718 16.1658 14.3572 16.498 14.1608V15.657C16.498 15.9767 16.7481 16.2361 17.0563 16.2361C17.3646 16.2361 17.6147 15.9767 17.6147 15.657V14.1608C17.9463 14.357 18.1725 14.7178 18.1725 15.1348C18.1725 15.4545 18.4226 15.7138 18.7309 15.7138C19.0391 15.7138 19.2892 15.4545 19.2892 15.1348C19.2892 14.071 18.5751 13.183 17.6149 12.9271V9.61693L19.5433 8.63383L19.5429 17.235L19.5436 17.2349ZM17.0686 8.60545L11.9894 5.76942C11.7174 5.61724 11.3798 5.72309 11.2334 6.00458C11.087 6.28606 11.1887 6.63734 11.4602 6.78856L15.8382 9.23316L15.6081 9.35064L11.7224 11.3319L1.82282 6.27923L11.7243 1.22506L21.6263 6.27923L17.0686 8.60545Z"
                    fill="#F6F6F6"
                  />
                </svg>
                <svg
                  :class="{ active: hash == curHash }"
                  class="informations"
                  v-if="route.id === 'informations'"
                  width="24"
                  height="22"
                  viewBox="0 0 24 22"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M5.13329 11.7337H3.66662C2.35659 11.7337 1.14613 11.0349 0.491198 9.9004C-0.163733 8.76587 -0.163733 7.36826 0.491198 6.23373C1.14613 5.0992 2.35663 4.40039 3.66662 4.40039H5.13329C5.32775 4.40039 5.51436 4.47765 5.65186 4.61515C5.78936 4.75265 5.86662 4.93926 5.86662 5.13373V11.0004C5.86662 11.1949 5.78936 11.3815 5.65186 11.519C5.51436 11.6565 5.32775 11.7337 5.13329 11.7337ZM3.66662 5.86706C2.88057 5.86706 2.15427 6.28644 1.76142 6.96706C1.3684 7.64768 1.3684 8.48645 1.76142 9.16707C2.15427 9.84768 2.88057 10.2671 3.66662 10.2671H4.39995V5.86706H3.66662Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M14.6666 14.6666C14.5936 14.6666 14.5209 14.6557 14.451 14.634L4.91766 11.7007C4.76772 11.6547 4.6366 11.5617 4.5433 11.4357C4.45015 11.3095 4.3999 11.1568 4.3999 11V5.13329C4.3999 4.97647 4.45015 4.82375 4.5433 4.69756C4.6366 4.57152 4.76772 4.47854 4.91766 4.43255L14.451 1.49921C14.6735 1.43079 14.9151 1.47204 15.1023 1.61019C15.2894 1.74851 15.3999 1.96736 15.3999 2.19996V13.9333C15.3999 14.1278 15.3227 14.3144 15.1852 14.4519C15.0477 14.5894 14.8611 14.6666 14.6666 14.6666L14.6666 14.6666ZM5.86657 10.4581L13.9333 12.9403V3.19283L5.86657 5.67502V10.4581Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M16.1331 16.1333C15.5499 16.1327 14.9905 15.9007 14.5782 15.4882C14.1657 15.0759 13.9338 14.5165 13.9331 13.9333V2.19997C13.9331 1.41392 14.3525 0.687624 15.0331 0.294766C15.7137 -0.0982553 16.5525 -0.0982553 17.2331 0.294766C17.9137 0.687624 18.3331 1.41392 18.3331 2.19997V13.9333C18.3325 14.5166 18.1005 15.0759 17.688 15.4882C17.2757 15.9007 16.7163 16.1327 16.1331 16.1333ZM16.1331 1.46663C15.9386 1.46696 15.7524 1.54423 15.6149 1.68172C15.4774 1.81922 15.4001 2.00551 15.3998 2.19996V13.9333C15.3998 14.1954 15.5396 14.4375 15.7665 14.5684C15.9933 14.6994 16.2729 14.6994 16.4998 14.5684C16.7267 14.4375 16.8665 14.1954 16.8665 13.9333V2.19996C16.8661 2.0055 16.7889 1.81922 16.6514 1.68172C16.5139 1.54423 16.3276 1.46696 16.1331 1.46663H16.1331Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M22.7331 8.79968H20.5331C20.2711 8.79968 20.029 8.65989 19.898 8.43301C19.7671 8.20613 19.7671 7.92655 19.898 7.69968C20.029 7.4728 20.2711 7.33301 20.5331 7.33301H22.7331C22.9952 7.33301 23.2373 7.4728 23.3682 7.69968C23.4992 7.92655 23.4992 8.20614 23.3682 8.43301C23.2373 8.65988 22.9952 8.79968 22.7331 8.79968Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M19.5269 5.51268C19.3162 5.51268 19.1159 5.42215 18.9766 5.26419C18.8373 5.10623 18.7728 4.89589 18.7993 4.68704C18.8258 4.47817 18.9407 4.29058 19.1151 4.17241L20.9373 2.93948H20.9374C21.1543 2.79265 21.4332 2.77268 21.6688 2.88726C21.9045 3.00169 22.0611 3.23314 22.08 3.49455C22.0986 3.7558 21.9765 4.00721 21.7595 4.15422L19.9373 5.38664C19.8161 5.46881 19.6732 5.51268 19.5269 5.51268H19.5269Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M21.3473 13.3192C21.2008 13.3193 21.0577 13.2753 20.9366 13.1931L19.1144 11.9602C18.952 11.8517 18.8397 11.6829 18.8022 11.4914C18.7647 11.2997 18.8052 11.1011 18.9145 10.9394C19.024 10.7777 19.1934 10.6664 19.3853 10.63C19.577 10.5937 19.7754 10.6353 19.9364 10.7456L21.7586 11.9783L21.7588 11.9785C21.9333 12.0965 22.0485 12.2841 22.0752 12.4931C22.1019 12.7022 22.0372 12.9127 21.8977 13.0708C21.7584 13.2289 21.5578 13.3193 21.3469 13.3191L21.3473 13.3192Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M3.66644 5.86692C3.47198 5.86692 3.28537 5.78966 3.14787 5.65216C3.01037 5.51466 2.93311 5.32805 2.93311 5.13359V3.66692C2.93311 3.40485 3.0729 3.16276 3.29977 3.03181C3.52665 2.90086 3.80623 2.90086 4.03311 3.03181C4.25998 3.16276 4.39977 3.40486 4.39977 3.66692V5.13359C4.39977 5.32805 4.32251 5.51466 4.18501 5.65216C4.04751 5.78966 3.8609 5.86692 3.66644 5.86692Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M6.6002 15.3995H3.66686C3.27794 15.3992 2.9052 15.2445 2.63022 14.9695C2.35524 14.6944 2.20053 14.3217 2.2002 13.9328V10.9042C2.2002 10.6422 2.33999 10.4001 2.56686 10.2691C2.79374 10.1382 3.07332 10.1382 3.3002 10.2691C3.52707 10.4001 3.66686 10.6422 3.66686 10.9042V13.9328H6.6002V11.6742C6.6002 11.4122 6.73999 11.1701 6.96687 11.0391C7.19375 10.9082 7.47333 10.9082 7.7002 11.0391C7.92708 11.1701 8.06687 11.4122 8.06687 11.6742V13.9328C8.06654 14.3217 7.91186 14.6945 7.63684 14.9695C7.36183 15.2444 6.98912 15.3991 6.6002 15.3995Z"
                    fill="#F6F6F6"
                  />
                  <path
                    d="M5.13311 22.0003C4.54988 21.9996 3.99053 21.7677 3.57823 21.3551C3.16573 20.9428 2.93378 20.3835 2.93311 19.8003V14.6669C2.93311 14.4725 3.01037 14.2859 3.14787 14.1484C3.28537 14.0109 3.47198 13.9336 3.66644 13.9336H6.59978C6.79424 13.9336 6.98085 14.0109 7.11835 14.1484C7.25585 14.2859 7.33311 14.4725 7.33311 14.6669V19.8003C7.33246 20.3835 7.10051 20.9428 6.68799 21.3551C6.27565 21.7677 5.7163 21.9996 5.13311 22.0003ZM4.39977 15.4003V19.8003C4.39977 20.0623 4.53956 20.3044 4.76644 20.4354C4.99332 20.5663 5.2729 20.5663 5.49978 20.4354C5.72665 20.3044 5.86644 20.0623 5.86644 19.8003V15.4003H4.39977Z"
                    fill="#F6F6F6"
                  />
                </svg>
                <svg
                  :class="{ active: hash == curHash }"
                  v-if="route.id === 'moncompte'"
                  width="32"
                  height="32"
                  viewBox="0 0 32 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M16 0C7.17714 0 0 7.17714 0 16C0 24.8229 7.17714 32 16 32C24.8229 32 32 24.8229 32 16C32 7.17714 24.8229 0 16 0ZM16 5.71429C19.1423 5.71429 21.7143 8.28624 21.7143 11.4286C21.7143 14.5709 19.1423 17.1429 16 17.1429C12.8577 17.1429 10.2857 14.5709 10.2857 11.4286C10.2857 8.28624 12.8577 5.71429 16 5.71429ZM11.4286 19.4286H20.5714C23.6918 19.4286 26.2398 21.9561 26.2811 25.0671C23.7702 27.9135 20.1038 29.7143 16 29.7143C11.8962 29.7143 8.22988 27.9133 5.71886 25.0671C5.76018 21.9564 8.30838 19.4286 11.4288 19.4286H11.4286Z"
                    fill="#F6F6F6"
                  />
                </svg>
              </div>
              <span :id="`span${route.id}`" class="nameLink">{{ route.label }}</span>
            </a>
          </div>
        </li>
        <div v-if="user !== null" @click="logout()">
          <button id="logout" a href="#logout">Déconnexion</button>
        </div>
      </ul>
    </nav>
    <logo id="logo"></logo>
  </div>
</template>
    
<style lang="css" scoped>
.sidenav {
  visibility: visible;
  height: 100%;
  width: 200px; /* devra être 2 douzième de la largeur de l'écran */
  position: fixed;
  display: block;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #444444;
  overflow-x: hidden;
  padding-top: 20px;
  text-transform: uppercase;
}

.sidenav a {
  padding: 24px 15px 24px 10px;
  width: 180px;
  text-decoration: none;
  font-size: 14px;
  font-weight: condensed;
  color: #fff;
  display: block;
}

.nameLink {
  display: block;
  margin-left: 30px;
  margin-top: -20px;
}

#logo {
  position: absolute;
  bottom: 30px;
}

#logout {
  padding: 24px 15px 24px 10px;
  width: 180px;
  text-decoration: none;
  font-size: 14px;
  font-weight: condensed;
  color: #fff;
  background-color: transparent;
  display: block;
  border: 0;
  text-align: left;
}

.sidenav a:hover > span {
  color: #ff0000;
}

.sidenav a:hover > div > svg > path {
  fill: #ff0000;
}

li,
#logout {
  list-style-type: none; /* enlève la bullet aux débuts des éléments "list" */
}

#login,
#logout {
  position: absolute;
  bottom: 90px;
  text-transform: uppercase;
}

#spanlogin {
  margin: 0 0 0 0;
}

#login:hover, #logout:hover {
  color: #ff0000;
}

div.oneLink > .active {
  background-color: #f6f6f6;
  border-radius: 20px 0px 0px 20px;
  color: black;
}

svg {
  width: 20px;
  height: 20px;
  margin-right: 5px;
}

svg.informations {
  transform: translateY(10px);
}

svg.active > path {
  fill: black;
}
</style> 